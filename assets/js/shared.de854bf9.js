"use strict";(self.webpackChunkPeach_test=self.webpackChunkPeach_test||[]).push([[804],{5617:(t,e,n)=>{function s(t,e=document){const n=function(t,e=document){const n=e.querySelector(t);if(!n)throw Error(`element ${t} does not exist`);return n}(t,e);if(n instanceof HTMLElement)return n;throw new Error(`the element found with selector "${t}" with type ${n.constructor.name} is not an instance of HTMLelement`)}function i(t,e=document){const n=function(t,e=document){const n=Array.from(e.querySelectorAll(t));if(!n.length)throw Error(`elements ${t} does not exist`);return n}(t,e);if(function(t){return t.every((t=>function(t){return t instanceof HTMLElement}(t)))}(n))return n;throw new Error(`the elements found with selector "${t}" is not an instance of HTMLelement`)}function o(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add(...e);const s=document.createElementNS("http://www.w3.org/2000/svg","use");return s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),n.append(s),n}function a(t){const e=document.createElement("div");return e.innerHTML=t,e.firstChild}n.d(e,{EA:()=>i,H7:()=>a,XF:()=>s,m_:()=>o})},4191:()=>{},8342:(t,e,n)=>{if(n.d(e,{N:()=>o}),643!=n.j)var s=n(5617);const i=643!=n.j?'<svg xmlns="http://www.w3.org/2000/svg" fill="none">\n  <path fill="currentColor" d="M4 4 7.5.2h-7L4 4Z"/>\n</svg>':null;class o{constructor(t,e){this.activeRegion=0,this.additionMenuExpanded=!1,this.options=e,this.regionControlElements=this.getRegionsControlElements(this.options.regions);const{containerElement:n,viewportElement:s,regionListElement:i,expandButtonElement:o,mapOverlayElement:a,detailsListElement:r}=this.render(t);this.containerElement=n,this.viewportElement=s,this.mapOverlayElement=a,this.regionListElement=i,this.expandButtonElement=o,this.detailsListElement=r,this.addEvents(),this.switchRegion(this.activeRegion),this.fitRegionLists()}render(t){const e=(0,s.XF)(t),n=document.createElement("article");n.classList.add("point-map");const{navigationElement:i,regionListElement:o,expandButtonElement:a,detailsListElement:r}=this.createNavigationMenu(),{viewportElement:l,mapOverlayElement:c}=this.createViewport();return n.append(i,l),e.append(n),{containerElement:n,viewportElement:l,regionListElement:o,expandButtonElement:a,mapOverlayElement:c,detailsListElement:r}}addEvents(){this.setDragToScroll(this.viewportElement),this.setDragToScroll(this.regionListElement),this.expandButtonElement.addEventListener("click",(t=>{const e=t.target;e instanceof Element&&e.closest("button")&&(this.additionMenuExpanded=!this.additionMenuExpanded,this.containerElement.classList.toggle("point-map--addition-menu-expanded",this.additionMenuExpanded))})),this.regionControlElements.forEach(((t,e)=>{var n;t.mainMenuButton.addEventListener("click",(()=>{this.activeRegion!==e&&(this.activeRegion=e,this.switchRegion(this.activeRegion))})),null===(n=t.additionMenuItem)||void 0===n||n.addEventListener("click",(()=>{var e;null===(e=t.additionMenuItem)||void 0===e||e.classList.toggle("point-map__region-detailed-item--opened")}))}))}setDragToScroll(t){const e=t;let n=!1,s=0,i=0,o=0,a=0;e.addEventListener("pointerdown",(t=>{n=!0,s=t.pageX-e.offsetLeft,i=t.pageY-e.offsetTop,o=e.scrollLeft,a=e.scrollTop})),e.addEventListener("pointerleave",(()=>{n=!1})),e.addEventListener("pointerup",(()=>{n=!1})),e.addEventListener("pointermove",(t=>{if(!n)return;t.preventDefault();const r=t.pageX-e.offsetLeft,l=t.pageY-e.offsetTop,c=1*(r-s),d=1*(l-i);e.scrollLeft=o-c,e.scrollTop=a-d}))}fitRegionLists(){const t=this.detailsListElement,e=getComputedStyle(this.detailsListElement);new ResizeObserver((()=>this.setAutoColumns(t,e))).observe(this.detailsListElement)}setAutoColumns(t,e){if(0===t.clientWidth)return;const n=t.clientWidth-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight),s=Array.from(t.children);let i=1;for(;o=i+1,n-(parseFloat(e.columnGap)*o-1)-function(t){const e=[];let n=1;for(;n<=t;){const i=s.filter(((e,s)=>(s+n)%t==0));e.push(i),n++}const i=e.reverse().map((t=>t.reduce(((t,e)=>{const n=Array.from(e.children)[1].getBoundingClientRect(),s=n.right-n.left;return t>s?t:s}),0)));return i}(o).reduce(((t,e)=>t+e),0)>=0&&i!==s.length;)i++;var o;this.detailsListElement.style.gridTemplateColumns=`repeat(${i}, auto)`}switchRegion(t){this.regionControlElements.forEach(((e,n)=>{e.mainMenuButton.classList.toggle("point-map__region-button--active",t===n)}));const e=this.regionControlElements[this.activeRegion].cities.map((t=>t.mapPoint));this.mapOverlayElement.innerHTML="",this.mapOverlayElement.append(...e)}createNavigationMenu(){const t=document.createElement("header");t.classList.add("point-map__navigation");const e=document.createElement("h3");e.classList.add("point-map__title"),e.textContent=this.options.title,t.append(e);const{mainNavigationElement:n,regionListElement:s,expandButtonElement:i}=this.createMainNavigationMenu(),{additionNavigationElement:o,detailsListElement:a}=this.createAdditionNavigationMenu();return t.append(n,o),{navigationElement:t,regionListElement:s,expandButtonElement:i,detailsListElement:a}}createMainNavigationMenu(){const t=document.createElement("div");t.classList.add("point-map__main-navigation");const e=document.createElement("button");e.classList.add("point-map__expand-button"),e.type="button",e.textContent=this.options.menuButtonText,e.setAttribute("aria-label","Разверуть/свернуть доп меню"),t.append(e),e.append(this.options.icons.expand);const n=document.createElement("ul");n.classList.add("point-map__region-list");const s=this.regionControlElements.map((t=>{const e=document.createElement("li");return e.classList.add("point-map__region-item"),e.append(t.mainMenuButton),e}));return n.append(...s),t.append(n),{mainNavigationElement:t,regionListElement:n,expandButtonElement:e}}createAdditionNavigationMenu(){const t=document.createElement("div");t.classList.add("point-map__addition-navigation");const e=document.createElement("ul");e.classList.add("point-map__region-detailed-list"),t.append(e);const n=this.regionControlElements.map((t=>t.additionMenuItem));return e.append(...n.filter((t=>t instanceof HTMLLIElement))),{additionNavigationElement:t,detailsListElement:e}}createViewport(){const t=document.createElement("div");t.classList.add("point-map__viewport");const e=document.createElement("div");e.classList.add("point-map__map");const n=this.getMapImageElement();e.append(n),t.append(e);const s=document.createElement("div");return s.classList.add("point-map__map-overlay"),e.append(s),{viewportElement:t,mapOverlayElement:s}}getMapImageElement(){return this.options.map instanceof SVGElement&&this.options.map.setAttribute("aria-label","Карта"),this.options.map instanceof HTMLImageElement&&this.options.map.setAttribute("alt","Карта"),this.options.map}getRegionsControlElements(t){const e=t.map((t=>{const e=document.createElement("button");e.type="button",e.classList.add("point-map__region-button"),e.textContent=t.name;let n=null,o=[];if(t.cities.length){const e=document.createElement("ul");e.classList.add("point-map__region-details-list"),n=e,o=t.cities.map((t=>{const e=document.createElement("li");e.classList.add("point-map__region-details-item");const n=document.createElement("button");return n.classList.add("button","point-map__city-button"),n.type="button",n.textContent=t.city,e.append(n),{menuItem:e,mapPoint:this.createPointElement(t)}})),o.length&&e.append(...o.map((t=>t.menuItem)))}const a=document.createElement("li");a.classList.add("point-map__region-detailed-item");const r=document.createElement("span");r.classList.add("point-map__region-summary"),r.textContent=t.name;const l=document.createElement("span"),c=(0,s.H7)(i);return l.textContent=" ",l.append(c),r.append(l),a.append(r),n&&a.append(n),{mainMenuButton:e,additionMenuItem:a,cities:o}})),n=document.createElement("button");n.type="button",n.classList.add("point-map__region-button"),n.textContent="Все";const o={mainMenuButton:n,additionMenuItem:null,cities:e.map((t=>t.cities)).flat()};return e.unshift(o),e}createPointElement(t){const e=document.createElement("div");e.classList.add("point-map__point"),t.size?e.classList.add(`point-map__point--${t.size}`):e.classList.add("point-map__point--small"),t.reverse&&e.classList.add("point-map__point--reverse"),e.style.left=`${t.coords.xPercent}%`,e.style.top=`${t.coords.yPercent}%`;const n=document.createElement("p");return n.classList.add("point-map__point-label"),n.textContent=this.getShortName(t.city),e.append(n),e}getShortName(t){const e=t.split(" "),n=e.pop(),s=[];if(e.length){const t=e.map((t=>t.split("")[0].toLocaleUpperCase()+"."));s.push(...t)}return s.push(n),s.join(" ")}}},8289:(t,e,n)=>{var s=n(5617);const i={slotClass:"accordion__slot",slotOpenClass:"accordion__slot--open",slotOpenedClass:"accordion__slot--opened",slotCloseClass:"accordion__slot--close",slotClosedClass:"accordion__slot--closed",summaryClass:"accordion__summary",triggerClass:"accordion__trigger",iconClass:"accordion__icon"};var o=n(7848),a=n(1236);class r extends a.A{constructor(t,e){super(t,Object.assign({},{pagination:{el:".brand-slider__pagination",bulletActiveClass:"brand-slider__pagination-bullet--active",bulletClass:"brand-slider__pagination-bullet"},navigation:{nextEl:".brand-slider__button--next",prevEl:".brand-slider__button--prev"}},e))}}var l=n(8342),c=n(5286),d=n(9441);n(6879),n(2552),n(4390),new class{constructor(t,e={}){this._slots=[],this.classParams=Object.assign({},i),this.isInitialized=!1,this.closeHandler=null,this.openHandler=null,this.initHandler=null,this.options=e,this.rootElement="string"==typeof t?(0,s.XF)(t):t;const{init:n=!0}=this.options;n&&this.init()}get slots(){if(this.isInitialized)return this._slots;throw new Error("Accordion is not initialized")}init(){this.destroy();const{classParams:t,defaultOpenSlotIndex:e=0}=this.options;t&&Object.assign(this.classParams,t),this._slots=this.getSlots(),this.addEvents(),"number"==typeof e&&this.openSlot(e),this.isInitialized=!0,this.initHandler&&this.initHandler(this)}destroy(){this.removeEvents(),this._slots=[],this.isInitialized=!1}onOpen(t){this.openHandler=t}onClose(t){this.closeHandler=t}onInit(t){this.initHandler=t}getSlots(){return(0,s.EA)(`.${this.classParams.slotClass}`,this.rootElement).map((t=>{const e={containerElement:t,triggerElement:(0,s.XF)(`.${this.classParams.triggerClass}`,t),iconElement:(0,s.XF)(`.${this.classParams.iconClass}`,t),isOpen:!1};return e.containerElement.classList.toggle(this.classParams.slotOpenedClass,e.isOpen),e.containerElement.classList.toggle(this.classParams.slotClosedClass,!e.isOpen),e}))}addEvents(){this._slots.forEach(((t,e)=>{t.containerElement.addEventListener("click",(n=>{const s=n.target;s instanceof Element&&s.closest("."+this.classParams.summaryClass)&&(t.isOpen?this.closeSlot(e):this.openSlot(e))})),t.containerElement.addEventListener("transitionend",(()=>{t.containerElement.classList.toggle(this.classParams.slotOpenedClass,t.isOpen),t.containerElement.classList.toggle(this.classParams.slotClosedClass,!t.isOpen),t.containerElement.classList.remove(this.classParams.slotOpenClass),t.containerElement.classList.remove(this.classParams.slotCloseClass)}))}))}removeEvents(){this._slots.forEach((t=>{const e=t.containerElement.cloneNode(!0);this.rootElement.replaceChild(e,t.containerElement)}))}openSlot(t){const e=this._slots[t];e.isOpen||(e.isOpen=!0,e.containerElement.classList.toggle(this.classParams.slotOpenClass,e.isOpen),e.containerElement.classList.toggle(this.classParams.slotCloseClass,!e.isOpen),e.containerElement.classList.remove(this.classParams.slotClosedClass),this.openHandler&&this.openHandler(e),this.options.multiOpen||this._slots.forEach(((e,n)=>{n!==t&&this.closeSlot(n)})))}closeSlot(t){const e=this._slots[t];!1!==e.isOpen&&(e.isOpen=!1,e.containerElement.classList.toggle(this.classParams.slotOpenClass,e.isOpen),e.containerElement.classList.toggle(this.classParams.slotCloseClass,!e.isOpen),e.containerElement.classList.remove(this.classParams.slotOpenedClass),this.closeHandler&&this.closeHandler(e))}}(".business-activity-section__list",{defaultOpenSlotIndex:!1}),function(){const t=(0,s.XF)(".corporate-life-section .brand-slider__button--prev"),e=(0,s.XF)(".corporate-life-section .brand-slider__button--next");new r(".corporate-life-section__slider",{modules:[o.Ij,o.Vx,o.dK],loop:!0,navigation:{nextEl:e,prevEl:t}})}(),function(){var t,e,n,i;t=this,e=void 0,i=function*(){const t=(0,s.m_)(c+"#arrow",["svg-icon","point-map__button-icon"]),e={title:"Офисы компании Softline",map:yield fetch(d).then((t=>t.text().then((t=>(0,s.H7)(t))))),icons:{expand:t},menuButtonText:"Офисы Softline",regions:[{name:"Москва",cities:[{city:"Москва",coords:{xPercent:14,yPercent:42.8},size:"medium"}]},{name:"Центр",cities:[{city:"Воронеж",coords:{xPercent:10.2,yPercent:45.7}},{city:"Ярославль",coords:{xPercent:17,yPercent:39.1}},{city:"Белгород",coords:{xPercent:9.95,yPercent:49.8}}]},{name:"Северо-Запад",cities:[{city:"Санкт-Петербург",coords:{xPercent:14.6,yPercent:30.3},size:"large"},{city:"Калининград",coords:{xPercent:5.8,yPercent:29.4}}]},{name:"Юг",cities:[{city:"Ростов-на-Дону",coords:{xPercent:9.2,yPercent:55.5},size:"medium"},{city:"Краснодар",coords:{xPercent:6.7,yPercent:63.5},size:"medium"},{city:"Волгоград",coords:{xPercent:11.4,yPercent:61.2}}]},{name:"Волга",cities:[{city:"Казань",coords:{xPercent:22.7,yPercent:52.7}},{city:"Самара",coords:{xPercent:17.7,yPercent:53.8}},{city:"Уфа",coords:{xPercent:23,yPercent:57.8}},{city:"Оренбург",coords:{xPercent:20.3,yPercent:61.65}},{city:"Нижний Новгород",coords:{xPercent:18,yPercent:47.6}}]},{name:"Урал",cities:[{city:"Екатерингбург",coords:{xPercent:28.3,yPercent:56.7}},{city:"Челябинск",coords:{xPercent:28.1,yPercent:61.35},size:"medium"},{city:"Пермь",coords:{xPercent:33,yPercent:52.8},size:"medium"},{city:"Сургут",coords:{xPercent:37.3,yPercent:54.5}},{city:"Тюмень",coords:{xPercent:35.6,yPercent:61.3},size:"medium"},{city:"Ижевск",coords:{xPercent:28.75,yPercent:51.5}}]},{name:"Сибирь",cities:[{city:"Новосибирск",coords:{xPercent:43.55,yPercent:73.7}},{city:"Омск",coords:{xPercent:39.3,yPercent:76.2},size:"medium"},{city:"Томск",coords:{xPercent:48.85,yPercent:74.3},size:"medium",reverse:!0},{city:"Красноярск",coords:{xPercent:53.4,yPercent:74}},{city:"Иркутск",coords:{xPercent:57.9,yPercent:78.4},size:"medium"}]},{name:"Дальний Восток",cities:[{city:"Хабаровск",coords:{xPercent:81.4,yPercent:79.4},size:"large",reverse:!0},{city:"Владивосток",coords:{xPercent:80.45,yPercent:89.9},size:"large"}]}]};new l.N(".greetings-section__point-map",e)},new((n=void 0)||(n=Promise))((function(s,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function r(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))}()}}]);